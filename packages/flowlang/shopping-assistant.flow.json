{
  "variant": "specs",
  "flows": [
    {
      "name": "Seasonal Assistant",
      "slices": [
        {
          "type": "command",
          "name": "enters shopping criteria into assistant",
          "client": {
            "description": "",
            "specs": [
              "Assistant Chat Interface"
            ]
          },
          "server": {
            "description": "",
            "gwt": [
              {
                "when": {
                  "commandRef": "EnterShoppingCriteria",
                  "exampleData": {
                    "shopperId": "shopper-123",
                    "criteria": "I need back-to-school items for my 7-year-old daughter who loves soccer and crafts, and my 12-year-old son who is into computers and Magic the Gathering."
                  }
                },
                "then": [
                  {
                    "eventRef": "ShoppingCriteriaEntered",
                    "exampleData": {
                      "sessionId": "session-abc",
                      "shopperId": "shopper-123",
                      "criteria": "I need back-to-school items for my 7-year-old daughter who loves soccer and crafts, and my 12-year-old son who is into computers and Magic the Gathering.",
                      "timestamp": "2025-07-17T17:30:21.715Z"
                    }
                  }
                ]
              }
            ],
            "data": [
              {
                "target": {
                  "type": "Event",
                  "name": "ShoppingCriteriaEntered"
                },
                "destination": {
                  "type": "stream",
                  "pattern": "shopping-session-{id}"
                },
                "__type": "sink"
              }
            ]
          }
        },
        {
          "type": "reaction",
          "name": "finds items in product catalogue"
        },
        {
          "type": "command",
          "name": "Do Chat",
          "client": {
            "description": "",
            "specs": []
          },
          "server": {
            "description": "",
            "gwt": [
              {
                "when": {
                  "commandRef": "DoChat",
                  "exampleData": {
                    "sessionId": "session-abc",
                    "prompt": "I need back-to-school items for my 7-year-old daughter who loves soccer and crafts, and my 12-year-old son who is into computers and Magic the Gathering."
                  }
                },
                "then": [
                  {
                    "eventRef": "ChatCompleted",
                    "exampleData": {
                      "sessionId": "session-abc",
                      "suggestedItems": [
                        {
                          "productId": "prod-soccer-ball",
                          "name": "Super Soccer Ball",
                          "quantity": 1,
                          "reason": "Perfect for your daughter who loves soccer"
                        },
                        {
                          "productId": "prod-craft-kit",
                          "name": "Deluxe Craft Kit",
                          "quantity": 1,
                          "reason": "Great for creative activities and crafts"
                        },
                        {
                          "productId": "prod-laptop-bag",
                          "name": "Tech Laptop Backpack",
                          "quantity": 1,
                          "reason": "Essential for your son's school computer needs"
                        },
                        {
                          "productId": "prod-mtg-starter",
                          "name": "Magic the Gathering Starter Set",
                          "quantity": 1,
                          "reason": "Ideal starter set for Magic the Gathering enthusiasts"
                        }
                      ],
                      "timestamp": "2025-07-17T17:30:21.715Z"
                    }
                  }
                ]
              }
            ],
            "data": [
              {
                "target": {
                  "type": "Command",
                  "name": "DoChat"
                },
                "destination": {
                  "type": "integration",
                  "systems": [
                    "AI"
                  ]
                },
                "__type": "sink"
              },
              {
                "target": {
                  "type": "State",
                  "name": "Products"
                },
                "origin": {
                  "type": "integration",
                  "systems": [
                    "ProductCatalogService"
                  ]
                },
                "__type": "source"
              }
            ]
          }
        },
        {
          "type": "query",
          "name": "views suggested items",
          "client": {
            "description": "",
            "specs": [
              "Suggested Items Screen"
            ]
          },
          "request": {
            "kind": "Document",
            "definitions": [
              {
                "kind": "OperationDefinition",
                "operation": "query",
                "name": {
                  "kind": "Name",
                  "value": "GetSuggestedItems"
                },
                "variableDefinitions": [
                  {
                    "kind": "VariableDefinition",
                    "variable": {
                      "kind": "Variable",
                      "name": {
                        "kind": "Name",
                        "value": "sessionId"
                      }
                    },
                    "type": {
                      "kind": "NonNullType",
                      "type": {
                        "kind": "NamedType",
                        "name": {
                          "kind": "Name",
                          "value": "ID"
                        }
                      }
                    },
                    "directives": []
                  }
                ],
                "directives": [],
                "selectionSet": {
                  "kind": "SelectionSet",
                  "selections": [
                    {
                      "kind": "Field",
                      "name": {
                        "kind": "Name",
                        "value": "suggestedItems"
                      },
                      "arguments": [
                        {
                          "kind": "Argument",
                          "name": {
                            "kind": "Name",
                            "value": "sessionId"
                          },
                          "value": {
                            "kind": "Variable",
                            "name": {
                              "kind": "Name",
                              "value": "sessionId"
                            }
                          }
                        }
                      ],
                      "directives": [],
                      "selectionSet": {
                        "kind": "SelectionSet",
                        "selections": [
                          {
                            "kind": "Field",
                            "name": {
                              "kind": "Name",
                              "value": "items"
                            },
                            "arguments": [],
                            "directives": [],
                            "selectionSet": {
                              "kind": "SelectionSet",
                              "selections": [
                                {
                                  "kind": "Field",
                                  "name": {
                                    "kind": "Name",
                                    "value": "productId"
                                  },
                                  "arguments": [],
                                  "directives": []
                                },
                                {
                                  "kind": "Field",
                                  "name": {
                                    "kind": "Name",
                                    "value": "name"
                                  },
                                  "arguments": [],
                                  "directives": []
                                },
                                {
                                  "kind": "Field",
                                  "name": {
                                    "kind": "Name",
                                    "value": "quantity"
                                  },
                                  "arguments": [],
                                  "directives": []
                                },
                                {
                                  "kind": "Field",
                                  "name": {
                                    "kind": "Name",
                                    "value": "reason"
                                  },
                                  "arguments": [],
                                  "directives": []
                                }
                              ]
                            }
                          }
                        ]
                      }
                    }
                  ]
                }
              }
            ],
            "loc": {
              "start": 0,
              "end": 229
            }
          },
          "server": {
            "description": "",
            "gwt": [
              {
                "given": [
                  {
                    "eventRef": "UnknownEvent",
                    "exampleData": {}
                  }
                ],
                "then": [
                  {
                    "stateRef": "UnknownState",
                    "exampleData": {}
                  }
                ]
              }
            ],
            "data": [
              {
                "target": {
                  "type": "State",
                  "name": "SuggestedItems"
                },
                "origin": {
                  "type": "projection",
                  "name": "SuggestedItemsProjection"
                },
                "__type": "source"
              }
            ]
          }
        },
        {
          "type": "command",
          "name": "accepts items and adds to their cart",
          "client": {
            "description": "",
            "specs": [
              "Suggested Items Screen"
            ]
          },
          "server": {
            "description": "",
            "gwt": [
              {
                "when": {
                  "commandRef": "AddItemsToCart",
                  "exampleData": {
                    "sessionId": "session-abc",
                    "items": [
                      {
                        "productId": "prod-soccer-ball",
                        "quantity": 1
                      },
                      {
                        "productId": "prod-craft-kit",
                        "quantity": 1
                      },
                      {
                        "productId": "prod-laptop-bag",
                        "quantity": 1
                      },
                      {
                        "productId": "prod-mtg-starter",
                        "quantity": 1
                      }
                    ]
                  }
                },
                "then": [
                  {
                    "eventRef": "ItemsAddedToCart",
                    "exampleData": {
                      "cartId": "cart-xyz",
                      "shopperId": "shopper-123",
                      "items": [
                        {
                          "productId": "prod-soccer-ball",
                          "quantity": 1
                        },
                        {
                          "productId": "prod-craft-kit",
                          "quantity": 1
                        },
                        {
                          "productId": "prod-laptop-bag",
                          "quantity": 1
                        },
                        {
                          "productId": "prod-mtg-starter",
                          "quantity": 1
                        }
                      ],
                      "timestamp": "2025-07-17T17:30:21.716Z"
                    }
                  }
                ]
              }
            ]
          }
        }
      ]
    }
  ],
  "messages": [
    {
      "type": "command",
      "name": "EnterShoppingCriteria",
      "fields": [
        {
          "name": "shopperId",
          "type": "string",
          "required": true
        },
        {
          "name": "criteria",
          "type": "string",
          "required": true
        }
      ],
      "metadata": {
        "version": 1
      }
    },
    {
      "type": "event",
      "name": "ShoppingCriteriaEntered",
      "fields": [
        {
          "name": "sessionId",
          "type": "string",
          "required": true
        },
        {
          "name": "shopperId",
          "type": "string",
          "required": true
        },
        {
          "name": "criteria",
          "type": "string",
          "required": true
        },
        {
          "name": "timestamp",
          "type": "Date",
          "required": true
        }
      ],
      "metadata": {
        "version": 1
      },
      "source": "internal"
    },
    {
      "type": "command",
      "name": "DoChat",
      "fields": [
        {
          "name": "sessionId",
          "type": "string",
          "required": true
        },
        {
          "name": "prompt",
          "type": "string",
          "required": true
        }
      ],
      "metadata": {
        "version": 1
      }
    },
    {
      "type": "command",
      "name": "ChatCompleted",
      "fields": [
        {
          "name": "sessionId",
          "type": "string",
          "required": true
        },
        {
          "name": "suggestedItems",
          "type": "unknown",
          "required": true
        },
        {
          "name": "timestamp",
          "type": "Date",
          "required": true
        }
      ],
      "metadata": {
        "version": 1
      }
    },
    {
      "type": "event",
      "name": "SuggestedItems",
      "fields": [
        {
          "name": "sessionId",
          "type": "string",
          "required": true
        },
        {
          "name": "items",
          "type": "unknown",
          "required": true
        }
      ],
      "metadata": {
        "version": 1
      },
      "source": "internal"
    },
    {
      "type": "command",
      "name": "AddItemsToCart",
      "fields": [
        {
          "name": "sessionId",
          "type": "string",
          "required": true
        },
        {
          "name": "items",
          "type": "unknown",
          "required": true
        }
      ],
      "metadata": {
        "version": 1
      }
    },
    {
      "type": "event",
      "name": "ItemsAddedToCart",
      "fields": [
        {
          "name": "cartId",
          "type": "string",
          "required": true
        },
        {
          "name": "shopperId",
          "type": "string",
          "required": true
        },
        {
          "name": "items",
          "type": "unknown",
          "required": true
        },
        {
          "name": "timestamp",
          "type": "Date",
          "required": true
        }
      ],
      "metadata": {
        "version": 1
      },
      "source": "internal"
    }
  ],
  "integrations": []
}